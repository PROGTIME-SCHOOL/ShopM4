@model ShopM4_Models.ViewModels.ProductUserViewModel

<h1> Summary </h1>


<form asp-action="SummaryPost">

    <!-- User -->
    <p>
        <label>Name</label>
        <input type="text" asp-for="@Model.ApplicationUser.FullName" class="form-control" />
        <span asp-validation-for="ApplicationUser.FullName" class="text-danger"></span>
    </p>

    <p>
        <label>Phone</label>
        <input type="text" asp-for="@Model.ApplicationUser.PhoneNumber" required class="form-control" />
        <span asp-validation-for="ApplicationUser.PhoneNumber" class="text-danger"></span>
    </p>

    <p>
        <label>Email</label>
        <input type="text" asp-for="@Model.ApplicationUser.Email" required class="form-control" />
        <span asp-validation-for="ApplicationUser.Email" class="text-danger"></span>
    </p>

    <!-- ADMIN for user -->
    @if (User.IsInRole(ShopM4_Utility.PathManager.AdminRole))
    {
        <p>
            <label>City</label>
            <input type="text" asp-for="@Model.ApplicationUser.City" class="form-control" />
            <span asp-validation-for="ApplicationUser.City" class="text-danger"></span>
        </p>

        <p>
            <label>Street</label>
            <input type="text" asp-for="@Model.ApplicationUser.Street" class="form-control" />
            <span asp-validation-for="ApplicationUser.Street" class="text-danger"></span>
        </p>

        <p>
            <label>House</label>
            <input type="text" asp-for="@Model.ApplicationUser.House" class="form-control" />
            <span asp-validation-for="ApplicationUser.House" class="text-danger"></span>
        </p>

        <p>
            <label>Apartment</label>
            <input type="text" asp-for="@Model.ApplicationUser.Apartment" class="form-control" />
            <span asp-validation-for="ApplicationUser.Apartment" class="text-danger"></span>
        </p>

        <p>
            <label>PostalCode</label>
            <input type="text" asp-for="@Model.ApplicationUser.PostalCode" class="form-control" />
            <span asp-validation-for="ApplicationUser.PostalCode" class="text-danger"></span>
        </p>
    }


    <!-- Products -->

    @{
        double totalPriceProducts = 0;
    }

    @for (int i = 0; i < Model.ProductList.Count(); i++)
    {
        <input type="hidden" asp-for="@Model.ProductList[i].Id" />

        <p>
            Product Name: @Model.ProductList[i].Name
        </p>

        @if (User.IsInRole(ShopM4_Utility.PathManager.AdminRole))
        {
            <p>
                Count: @Model.ProductList[i].TempCount
            </p>

            <p>
                Total Price: @(Model.ProductList[i].TempCount * Model.ProductList[i].Price)
            </p>

            totalPriceProducts += Model.ProductList[i].TempCount * Model.ProductList[i].Price;
        }
        else
        {
            <p>
                Price per thing: @Model.ProductList[i].Price
            </p>
        }
    }

    @if (User.IsInRole(ShopM4_Utility.PathManager.AdminRole))
    {
        <h3>
            Total Price Products: @totalPriceProducts
        </h3>
    }



    @if (User.IsInRole(ShopM4_Utility.PathManager.AdminRole))
    {
        <p>
            <button type="submit" class="btn btn-primary form-control">Submit Order</button>
        </p>
    }
    else
    {
        <p>
            <button type="submit" class="btn btn-success form-control">Submit Query</button>
        </p>
    }


</form>

@section Scripts {
    @{
        <partial name="_ValidationScriptsPartial" />
    }
}